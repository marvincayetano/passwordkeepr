<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <link rel="stylesheet" href="/styles/main.css" type="text/css" />
    <link rel="stylesheet" href="/styles/layout.css" type="text/css" />
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
      integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
      crossorigin="anonymous"
    />
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

    <script type="text/javascript" src="/scripts/copyToClipboard.js"></script>
    <script type="text/javascript" src="/scripts/passwordgenerator.js"></script>

    <title>PasswordKeeper</title>
  </head>
  <body>
    <%- include("partials/_header") %>
    <main class="d-flex flex-column align-items-center pt-5">
      <div class="container-fluid w-75">
        <% if(typeof message !== 'undefined') { %>
        <div class="alert alert-success" role="alert"><%= message %></div>
        <% } %> <% if(typeof error !== 'undefined') { %>
        <div class="alert alert-danger" role="alert"><%= error %></div>
        <% } %>
        <div class="d-flex justify-content-between">
          <h1>My accounts</h1>
          <div>
            <!-- <button type="button" class="btn btn-secondary">Edit</button> -->
            <button
              type="button"
              class="btn btn-success"
              data-toggle="modal"
              data-target="#addAccountModal"
            >
              Add Account
            </button>
            <div
              id="addAccountModal"
              class="modal fade bd-example-modal-lg"
              tabindex="-1"
              role="dialog"
              aria-labelledby="myLargeModalLabel"
              aria-hidden="true"
            >
              <div class="modal-dialog modal-lg">
                <div class="modal-content p-5">
                  <h2>Please select profile category:</h2>
                  <form action="/accounts" method="post">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="radio"
                        name="category"
                        id="flexRadioDefault1"
                        value="1"
                        checked
                      />
                      <label class="form-check-label" for="flexRadioDefault1">
                        Social
                      </label>
                    </div>
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="radio"
                        name="category"
                        id="flexRadioDefault2"
                        value="2"
                      />
                      <label class="form-check-label" for="flexRadioDefault2">
                        Entertainment
                      </label>
                    </div>
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="radio"
                        name="category"
                        id="flexRadioDefault3"
                        value="3"
                      />
                      <label class="form-check-label" for="flexRadioDefault3">
                        Financial
                      </label>
                    </div>
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="radio"
                        name="category"
                        id="flexRadioDefault4"
                        value="4"
                      />
                      <label class="form-check-label" for="flexRadioDefault4">
                        Work-Related
                      </label>
                    </div>
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="radio"
                        name="category"
                        id="flexRadioDefault5"
                        value="5"
                      />
                      <label class="form-check-label" for="flexRadioDefault5">
                        Other
                      </label>
                    </div>

                    <div class="form-group">
                      <label for="recipient-name" class="col-form-label"
                        >Enter Website Here:</label
                      >
                      <input
                        type="url"
                        class="form-control"
                        id="website-name"
                        name="url"
                        required
                      />
                    </div>
                    <div class="form-group">
                      <label for="recipient-name" class="col-form-label"
                        >Username</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="username"
                        name="username"
                        required
                      />
                    </div>
                    <div class="form-group">
                      <label for="recipient-name" class="col-form-label"
                        >Password</label
                      >
                      <div class="d-flex">
                        <input type="text" class="form-control" id="resultDOM" name="password" required>
                        <button id="generate" class="btn btn-primary mb-2">Generate</button>
                      </div>
                      <div class="d-flex align-items-center">
                        <div class="form-check pr-1">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            value=""
                            id="lowercase"
                            checked
                          />
                          <label class="form-check-label" for="lowercase">
                            Lowercase
                          </label>
                        </div>
                        <div class="form-check pr-1">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            value=""
                            id="uppercase"
                            checked
                          />
                          <label class="form-check-label" for="uppercase">
                            Uppercase
                          </label>
                        </div>
                        <div class="form-check pr-1">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            value=""
                            id="numbers"
                            checked
                          />
                          <label class="form-check-label" for="numbers">
                            Numbers
                          </label>
                        </div>
                        <div class="form-check pr-1">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            value=""
                            id="symbols"
                            checked
                          />
                          <label class="form-check-label" for="symbols">
                            Symbols
                          </label>
                        </div>
                        <div class="form-check pr-1">
                          <div class="d-flex align-items-center mb-2">
                            <label for="recipient-name" class="form-label mr-2"
                              >Length</label
                            >
                            <input
                              type="text"
                              class="form-control"
                              id="length"
                              value="8"
                            />
                          </div>
                        </div>
                    </div>
                    <div class="form-group">
                      <label for="message-text" class="col-form-label"
                        >Description:</label
                      >
                      <textarea
                        class="form-control"
                        id="message-text"
                        name="description"
                        required
                      ></textarea>
                    </div>
                    <div class="form-group">
                      <button type="submit" class="btn btn-success">
                        Create
                      </button>
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-dismiss="modal"
                      >
                        Cancel
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div aria-label="breadcrumb" class="pt-5">
        <ol class="breadcrumb">
          <li class="breadcrumb-item active" aria-current="page">
            User Accounts
          </li>
        </ol>
        <% if(data.accounts && typeof data.accounts !== 'undefined') { %>
        <% for(const account of data.accounts) { %>
        <div
          class="w-full rounded d-flex flex-column p-3 mb-5"
          style="background-color: wheat"
        >
          <div class="d-flex">
            <h3><%= account.url %></h3>
            <p class="ml-3">
              <% if(account.category_id === 1) { %>
              <span class="badge badge-primary">Social</span>
              <% } else if(account.category_id === 2) { %>
              <span class="badge badge-secondary">Entertainment</span>
              <% } else if(account.category_id === 3) { %>
              <span class="badge badge-success">Financial</span>
              <% } else if(account.category_id === 4) { %>
              <span class="badge badge-warning">Work-Related</span>
              <% } else if(account.category_id === 5) { %>
              <span class="badge badge-info">Other</span>
              <% } %>
            </p>
          </div>
          <div>
            <h6><%= account.description %></h6>
            <div class="pb-3 d-flex">
              <input
                class="w-50"
                value="<%= account.username %>"
                id="<%= account.id %>-username"
                disabled
              />
              <button id="copyBtnUsername" value="<%= account.id %>-username">
                copy username
              </button>
            </div>
            <div class="pb-3 d-flex">
              <input
                class="w-50"
                value="<%= account.password %>"
                id="<%= account.id %>-password"
                disabled
              />
              <button id="copyBtnPassword" value="<%= account.id %>-password">
                copy password
              </button>
            </div>
            <div class="d-flex">
              <form
                method="GET"
                class="mr-2"
                action="/accounts/<%= account.id %>/edit"
              >
                <button type="submit" class="btn btn-primary">Edit</button>
              </form>

              <% if(data.organization_id !== null) { %> <%
              if(account.organization_id === null) { %>
              <form
                action="/accounts/<%= account.id %>/share"
                class="mr-2"
                method="post"
              >
                <button type="submit" class="btn btn-secondary">Share</button>
              </form>
              <% } else { %>
              <form
                action="/accounts/<%= account.id %>/unshare"
                class="mr-2"
                method="post"
              >
                <button type="submit" class="btn btn-secondary">Unshare</button>
              </form>
              <% } %> <% } %>

              <button
                type="button"
                class="btn btn-danger mr-2"
                data-toggle="modal"
                data-target="#deleteAccountModal"
              >
                Delete
              </button>

              <div
                id="deleteAccountModal"
                class="modal fade bd-example-modal-lg"
                tabindex="-1"
                role="dialog"
                aria-labelledby="myLargeModalLabel"
                aria-hidden="true"
              >
                <form
                  action="/accounts/<%= account.id %>/delete"
                  class="mr-2"
                  method="post"
                >
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">
                          Delete <%= account.url %> ?
                        </h5>
                      </div>
                      <div class="modal-body">
                        This will delete the account completely
                      </div>
                      <div class="modal-footer">
                        <div class="modal-footer">
                          <button
                            type="button"
                            class="btn btn-secondary"
                            data-dismiss="modal"
                          >
                            Close
                          </button>
                          <button type="submit" class="btn btn-danger">
                            Delete
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
        <% } %>
        <% } %>
        <!-- The actual snackbar -->
        <div id="snackbar">Copied text!</div>
      </div>
    </main>

    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  </body>
</html>
